parameters:
  test-command:
    default: validate
    type: string
  app-dir:
    default: ~/project
    type: string
jobs:
  install_php:
    docker:
      - image: 'cimg/base:2020.12-18.04'
    steps:
      - php/install-php:
          version: '7.2'
      - run: sudo apt-get update
      - php/install-composer:
          install-version: 1.10.16
  test_php:
    docker:
      - image: 'cimg/base:2020.12-18.04'
    steps:
      - checkout
      - php/install-packages
      - run: composer validate
orbs:
  php: circleci/php@1.1.0
version: 2.1

workflows:
  install:
    jobs:
      - install_php
      - test_php:
          requires:
            - install_php



