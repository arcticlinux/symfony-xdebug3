jobs:
  install_and_test:
    docker:
      # Ubuntu 18.04 base image
      - image: 'cimg/base:2020.12-18.04'
    steps:
      - php/install-php:
          version: '7.2'
      #- run: sudo apt-get update
      # Minimal packages for symfony to run with xdebug
      - run: sudo apt install php7.2-xdebug php7.2-xml
      # A list of all my installed packages
      #- run: sudo apt install php-phpdbg php-dev php-fpm php-gd php-intl php-mbstring php-mysql php-opcache php-readline php-sqlite3 php-soap php-xmlrpc php-zip
      - checkout
      - php/install-composer:
          install-version: 1.10.16
      - run: sudo ln -s /usr/local/bin/composer /usr/bin/composer
      - run: sudo ls -al /usr/bin/composer
      - run: sudo ls -al /usr/local/bin/composer
      - run: echo $PATH
      - run: whereis composer
      - run: which composer
      - run: hash -r
      - run: echo $PATH
      - run: whereis composer
      - run: which composer
      - run: pwd
      - run: ls -al
      - run: ls -alR
      - run: php -v
      - run: php --ini
      - php/install-packages
      - run: composer validate
orbs:
  php: circleci/php@1.1.0
version: 2.1

workflows:
  install:
    jobs:
      - install_and_test



